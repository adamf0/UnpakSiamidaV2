package applicationtest

import (
	"context"
	"fmt"
	"testing"
	"time"

	"gorm.io/driver/mysql"
	"gorm.io/gorm"

	"github.com/testcontainers/testcontainers-go"
	"github.com/testcontainers/testcontainers-go/wait"
)

func setupBeritaAcaraMySQL(t *testing.T) (*gorm.DB, func()) {
	ctx := context.Background()

	req := testcontainers.ContainerRequest{
		Image: "mysql:8.0",
		Env: map[string]string{
			"MYSQL_ROOT_PASSWORD": "pass",
			"MYSQL_DATABASE":      "testdb",
		},
		ExposedPorts: []string{"3306/tcp"},
		WaitingFor: wait.ForListeningPort("3306/tcp").
			WithStartupTimeout(10 * time.Minute),
	}

	mysqlC, err := testcontainers.GenericContainer(ctx, testcontainers.GenericContainerRequest{
		ContainerRequest: req,
		Started:          true,
	})
	if err != nil {
		t.Fatalf("failed to start container: %v", err)
	}

	host, _ := mysqlC.Host(ctx)
	port, _ := mysqlC.MappedPort(ctx, "3306")

	dsn := fmt.Sprintf("root:pass@tcp(%s:%s)/testdb?parseTime=true&multiStatements=true&allowNativePasswords=true", host, port.Port())

	var gdb *gorm.DB
	// Retry connect 10x
	for i := 0; i < 10; i++ {
		gdb, err = gorm.Open(mysql.Open(dsn), &gorm.Config{})
		if err == nil {
			break
		}
		t.Logf("retrying GORM connection: %v", err)
		time.Sleep(1 * time.Second)
	}
	if err != nil {
		t.Fatalf("cannot connect via GORM after retries: %v", err)
	}

	// Buat table & data contoh
	err = gdb.Exec(`
		CREATE TABLE berita_acara (
			id int(11) PRIMARY KEY AUTO_INCREMENT NOT NULL,
			uuid varchar(36) DEFAULT NULL,
			tahun year(4) NOT NULL,
			fakultas_unit_old int(11) DEFAULT NULL,
			fakultas_unit int(11) DEFAULT NULL,
			tanggal date NOT NULL,
			auditee bigint(20) UNSIGNED DEFAULT NULL,
			auditor1 bigint(20) UNSIGNED DEFAULT NULL,
			auditor2 bigint(20) UNSIGNED DEFAULT NULL,
			created_at timestamp NULL DEFAULT NULL,
			updated_at timestamp NULL DEFAULT NULL
		);

        INSERT INTO berita_acara (id, uuid, tahun, fakultas_unit_old, fakultas_unit, tanggal, auditee, auditor1, auditor2, created_at, updated_at) VALUES
		(16, '14212231-792f-4935-bb1c-9a38695a4b6b', '2023', NULL, 9, '2023-10-28', 271, 376, 151, '2023-10-27 13:42:59', '2023-10-27 13:42:59'),
		(19, 'ba9f4f89-41bd-4737-acf4-48554ed9210e', '2023', NULL, 2, '2023-10-28', 247, 118, 151, '2023-10-27 13:58:26', '2023-10-27 13:58:26'),
		(22, 'ccab56fa-c290-4497-8248-657937802ae0', '2023', NULL, 3, '2023-12-20', 250, 70, 211, '2023-10-28 03:43:34', '2023-12-20 03:40:48'),
		(28, '62039c56-77c4-4532-afa2-665be559a966', '2023', NULL, 12, '2023-12-18', 286, 67, 208, '2023-12-18 03:16:16', '2023-12-18 03:16:16'),
		(31, '10f63b40-4235-45e5-9333-2917624b7210', '2023', NULL, 100, '2023-12-18', 274, 46, 154, '2023-12-18 04:30:41', '2023-12-18 04:30:41'),
		(37, '19eac91d-8c6b-4514-a62d-10da1a6e1c49', '2023', NULL, 13, '2023-12-18', 283, 124, 217, '2023-12-18 09:38:49', '2023-12-18 09:38:49'),
		(40, 'ab8e52ab-53c4-4fd2-b0f8-0bfe8c34f780', '2023', NULL, 112, '2023-12-19', 355, 55, 163, '2023-12-18 21:30:58', '2023-12-18 21:30:58'),
		(43, '67f2fe94-95e5-4fd9-896c-abf38900716b', '2023', NULL, 25, '2023-12-19', 319, 46, 151, '2023-12-18 23:27:38', '2023-12-18 23:27:38'),
		(46, '7990715d-247e-4e35-b567-c8a0091aa9c5', '2023', NULL, 91, '2023-12-20', 232, 82, 190, '2023-12-19 02:21:49', '2023-12-19 02:21:49'),
		(49, '11b56c9a-3236-4db3-b954-fab8f4b38472', '2023', NULL, 36, '2023-12-19', 370, 43, 202, '2023-12-19 02:31:04', '2023-12-19 02:31:04'),
		(52, '243d50a5-9edf-4bcc-bd6f-5eb2eb8bc4b1', '2023', NULL, 2, '2023-12-20', 247, 97, 202, '2023-12-19 08:09:31', '2023-12-19 08:09:31'),
		(55, 'e2225d01-e834-4370-ae02-12186c90dd9d', '2023', NULL, 40, '2023-12-19', 358, 76, 154, '2023-12-19 14:46:12', '2023-12-19 14:46:12'),
		(58, '505c5699-354b-425d-9193-de3073cea616', '2023', NULL, 4, '2023-12-20', 244, 121, 181, '2023-12-20 08:02:37', '2023-12-20 08:02:37'),
		(61, 'a736389e-b8ee-4bc4-8015-bfd2b4ced3a3', '2023', NULL, 1, '2023-12-20', 235, 70, 166, '2023-12-20 08:18:22', '2023-12-20 08:18:22'),
		(64, '645de2aa-1436-45f4-981a-825a6a80b87b', '2023', NULL, 14, '2023-12-18', 277, 70, 196, '2023-12-20 08:18:58', '2023-12-20 08:18:58'),
		(67, '091c480a-7a01-43b5-8519-c9961b0d4f78', '2023', NULL, 94, '2023-12-20', 241, 76, 184, '2023-12-20 12:13:49', '2023-12-20 12:13:49'),
		(70, 'ad9b8941-2d8f-4923-9e72-35ca2f96f12f', '2023', NULL, 22, '2023-12-21', 310, 124, 175, '2023-12-21 01:35:51', '2023-12-21 01:35:51'),
		(73, '36963565-2ede-4969-8d81-2e1334e31997', '2023', NULL, 24, '2023-12-21', 322, 61, 226, '2023-12-21 02:09:01', '2023-12-21 02:09:01'),
		(76, '6030733b-13d5-45ae-9fa4-6efe14a11bf9', '2023', NULL, 21, '2023-12-21', 316, 73, 208, '2023-12-21 04:43:41', '2023-12-21 04:43:41'),
		(79, '4133efe2-f8a3-46d2-9c8d-def75ac1e4b4', '2023', NULL, 106, '2023-12-21', 307, 76, 184, '2023-12-22 08:23:53', '2023-12-22 08:23:53'),
		(82, '046b042f-17ef-4a61-b3ec-40e54f31777f', '2023', NULL, 32, '2023-12-27', 334, 91, 181, '2023-12-23 01:09:54', '2023-12-27 08:46:29'),
		(85, '37ca9fbe-c430-4965-9193-4c45cfe578e4', '2023', NULL, 97, '2023-12-23', 253, 67, 175, '2023-12-23 02:28:40', '2023-12-23 02:28:40'),
		(88, '1e714579-d8c5-463f-9681-8a6b622e48a8', '2023', NULL, 11, '2023-12-23', 259, 58, 220, '2023-12-23 03:53:32', '2023-12-23 03:53:32'),
		(91, 'f67e5d42-3b12-470d-a2c5-726ef44e5cac', '2023', NULL, 6, '2023-12-23', 268, 106, 175, '2023-12-23 06:32:29', '2023-12-23 06:32:29'),
		(94, '7675f40b-4148-424b-b6e9-23f30b7ada85', '2023', NULL, 39, '2023-12-27', 367, 97, 172, '2023-12-25 01:18:25', '2023-12-25 01:18:25'),
		(97, '18f94ec8-ae1e-4d61-b82d-794bfc00ba85', '2023', NULL, 109, '2023-12-27', 325, 61, 169, '2023-12-27 02:40:53', '2023-12-27 02:45:06'),
		(100, 'ffe855dd-7a31-4911-9ac3-ce404e1660b8', '2023', NULL, 20, '2023-12-27', 295, 121, 217, '2023-12-27 02:44:51', '2023-12-27 02:44:51'),
		(103, '5a0f899d-01de-462b-93da-295c708265b3', '2023', NULL, 28, '2023-12-28', 337, 46, 175, '2023-12-27 02:54:26', '2023-12-27 02:54:26'),
		(106, 'f799d4aa-d655-443f-aae3-e6047757bee9', '2023', NULL, 28, '2023-12-27', 337, 43, 175, '2023-12-27 02:56:24', '2023-12-27 02:56:24'),
		(118, '4b4e3049-2210-48dd-a5e7-b58b8558c2b8', '2023', NULL, 15, '2023-12-18', 280, 115, 160, '2023-12-27 03:55:10', '2023-12-27 03:55:10'),
		(121, '950807bc-b278-4135-9e22-3033dd964d97', '2023', NULL, 26, '2023-12-27', 331, 43, 187, '2023-12-27 06:54:21', '2023-12-27 06:54:21'),
		(124, '59642265-b7e5-4f47-b76a-57f806cb33f4', '2023', NULL, 17, '2023-12-28', 298, 127, 172, '2023-12-27 08:12:53', '2023-12-31 08:18:51'),
		(127, '9d18c470-01c0-4aab-a453-55a1b601caae', '2023', NULL, 33, '2023-12-27', 352, 43, 178, '2023-12-27 08:55:28', '2023-12-27 08:55:28'),
		(130, 'e553cf70-7060-4c9a-a2b1-3cd07ae063ce', '2023', NULL, 103, '2023-12-28', 289, 70, NULL, '2023-12-28 01:08:54', '2023-12-28 01:08:54'),
		(133, '16cc7f98-4e56-49de-ae60-47c0033bd53b', '2023', NULL, 103, '2023-12-28', 289, 70, NULL, '2023-12-28 01:10:00', '2023-12-28 01:10:00'),
		(136, 'e5d846aa-1612-4c9c-a437-d3626ae3a8f1', '2023', NULL, 25, '2023-12-28', 319, 43, 208, '2023-12-28 03:03:02', '2023-12-28 03:03:02'),
		(139, '6f09ab15-ec72-496c-b3af-525f342f932f', '2023', NULL, 103, '2023-12-28', 289, 70, 178, '2023-12-28 06:01:39', '2023-12-28 06:01:39'),
		(142, '3ed6a5a2-69df-4e4f-8e3f-9cae77b15456', '2023', NULL, 16, '2023-12-28', 301, 85, 178, '2023-12-28 08:26:03', '2023-12-28 08:26:03'),
		(145, 'b549076f-1016-4cf5-a9c8-4c9952f62308', '2023', NULL, 18, '2023-12-28', 304, 127, 166, '2023-12-28 09:07:06', '2023-12-29 06:32:05'),
		(148, '49fecfdc-d1a7-40e1-bdd8-93e29929f7af', '2023', NULL, 10, '2023-12-28', 256, 79, 223, '2023-12-28 09:44:34', '2023-12-28 09:44:34'),
		(151, 'cd6abee2-2203-498b-b60e-b4d75203e9f9', '2023', NULL, 10, '2023-12-28', 256, 79, 223, '2023-12-28 09:45:00', '2023-12-28 09:45:00'),
		(154, 'afec5583-0dd3-4018-a747-1a52ede238d9', '2023', NULL, 19, '2023-12-29', 292, 85, 175, '2023-12-29 02:38:26', '2023-12-29 02:38:26'),
		(157, 'bef81a79-da46-40b0-8a8e-a3c40f7a972e', '2023', NULL, 38, '2023-12-19', 364, 73, 211, '2023-12-30 03:38:07', '2023-12-30 03:38:07'),
		(160, '57f87db6-14dd-49e8-b568-c55773e7a111', '2023', NULL, 23, '2024-01-24', 313, 82, 217, '2024-01-01 08:06:11', '2024-01-01 08:09:09'),
		(163, '8a6d823e-bbcc-405c-9b9d-679bcf1e43c6', '2023', NULL, 7, '2023-12-29', 265, 82, 187, '2024-01-01 08:11:10', '2024-01-16 04:53:25'),
		(166, '5ee0381c-3381-4b7d-826d-97f18d8093b2', '2023', NULL, 37, '2023-12-19', 373, 91, 151, '2024-01-02 01:25:56', '2024-01-02 01:46:02'),
		(167, 'e514ab9b-0f0b-436e-8ef0-5efcd8b9f9c7', '2023', NULL, 35, '2023-12-27', 349, 64, 157, '2024-01-30 04:03:02', '2024-01-30 04:03:02'),
		(170, 'a1e04ee0-d2ac-4a4f-ac4d-f5fd455a9a88', '2023', NULL, 27, '2023-12-28', 343, 106, 181, '2024-01-30 04:05:27', '2024-01-30 04:05:27'),
		(173, '90487851-c3e6-4b58-a336-127813d1b6de', '2023', NULL, 5, '2023-12-23', 262, 91, 178, '2024-01-30 04:08:02', '2024-01-30 04:08:02'),
		(176, '24d933cf-1fe9-409b-ad92-8939922f0030', '2023', NULL, 29, '2023-12-27', 340, 91, 178, '2024-01-30 04:12:57', '2024-01-30 04:12:57'),
		(179, 'e6a59c18-e703-4411-b92a-ea483230726b', '2023', NULL, 30, '2023-12-28', 346, 88, 160, '2024-01-30 05:09:19', '2024-01-30 05:09:19'),
		(182, '465951fc-af67-4d88-88aa-8177942a8f0a', '2023', NULL, 31, '2023-12-27', 328, 91, 178, '2024-01-30 05:10:34', '2024-01-30 05:10:34'),
		(184, '71f3c5d7-7fb6-4d10-b918-5ef0197846e4', '2024', NULL, 68, '2024-02-27', 403, NULL, 415, '2024-02-27 01:13:18', '2024-02-27 01:13:18'),
		(187, '84951ba9-05e4-41b4-b634-c2753853e591', '2024', NULL, 41, '2024-02-27', 406, NULL, 175, '2024-02-27 01:32:48', '2024-02-27 01:32:48'),
		(190, 'b8c7fd1d-2d9b-4938-b9ec-ba655c11a0db', '2023', NULL, 113, '2024-02-27', 400, NULL, 151, '2024-02-27 03:52:15', '2024-03-06 03:23:19'),
		(193, '89dd525d-e259-4d6e-9ba6-b8399ffe2864', '2024', 89, NULL, '2024-02-27', 397, NULL, 175, '2024-02-27 04:16:18', '2024-02-27 04:16:18'),
		(196, 'e6e59e2e-8df6-4d4a-90cc-727889c9a8f8', '2024', NULL, 71, '2024-02-27', 391, NULL, 415, '2024-02-27 06:40:21', '2024-02-27 06:40:21'),
		(199, '008a1317-1e23-48b6-82dd-ea51faed958f', '2024', NULL, 72, '2024-02-27', 388, NULL, 178, '2024-02-27 06:54:35', '2024-02-27 06:54:35'),
		(202, 'eb8da2c5-491b-465a-9843-c3f8f339191a', '2024', NULL, 69, '2024-02-29', 413, NULL, 163, '2024-02-29 03:40:52', '2024-02-29 03:40:52'),
		(205, 'a54d7a8e-b78a-49a4-8ce2-f5f896671f34', '2024', NULL, 119, '2024-02-29', 407, NULL, 178, '2024-02-29 06:41:38', '2024-02-29 06:41:38'),
		(208, '83ef63f1-9f22-43de-95ed-2002a57c4aa7', '2024', NULL, 70, '2024-02-29', 382, NULL, 151, '2024-03-01 08:26:25', '2024-03-01 08:26:25'),
		(211, '1b9b9219-fe5c-466a-a717-f51ed1e2b7ba', '2024', 88, 88, '2024-02-27', 394, NULL, 178, '2024-03-04 06:29:10', '2024-03-04 06:29:10'),
		(214, 'ac82f6dd-4329-4761-a4c2-324007d6584e', '2023', NULL, 116, '2024-02-29', 410, NULL, 151, '2024-03-04 08:17:49', '2024-03-04 08:17:49'),
		(217, 'a11ab2ea-8dc3-4dc4-9345-8a3ae118a41f', '2024', NULL, 75, '2024-03-05', 385, NULL, 175, '2024-03-05 06:36:18', '2024-03-05 06:36:18'),
		(220, 'b9bfe8ff-9709-4976-bf58-81ffddd4adf0', '2024', NULL, 41, '2024-09-03', 406, NULL, NULL, '2024-09-03 04:12:51', '2024-09-03 04:12:51'),
		(223, 'c5b509df-7a59-47a2-bcd9-3fd2563fb145', '2025', NULL, 41, '2024-09-08', 406, NULL, 226, '2024-09-03 04:14:32', '2024-09-03 04:14:32'),
		(226, '3ad65d2c-50c5-4855-aea6-e343329a695f', '2024', NULL, 1, '2024-09-09', 232, 40, 154, '2024-09-24 07:41:06', '2024-09-24 07:41:06'),
		(229, '7c9fdc9e-5a68-4a29-b322-5c02a8d922cb', '2024', NULL, 91, '2024-09-25', 232, 43, 415, '2024-09-25 03:33:55', '2024-09-25 03:33:55'),
		(236, 'a601a2a6-1de5-4961-a84c-d05b96569907', '2024', NULL, 25, '2024-12-17', 319, 43, 217, '2024-10-11 03:42:58', '2024-12-17 05:09:40'),
		(239, 'bcfd04b8-9a32-4720-b7b4-fa31aeb56887', '2024', NULL, 41, '2024-10-12', 425, 428, 431, '2024-10-12 04:03:45', '2024-10-12 04:03:45'),
		(242, '3e30aa21-9198-46ec-abf1-757e9bb8b422', '2024', NULL, 3, '2024-12-14', 250, 43, 211, '2024-10-15 07:04:01', '2024-12-14 05:31:10'),
		(248, 'f02b4607-ac0d-4703-ac7c-3ebdd5602194', '2024', NULL, 14, '2024-12-14', 277, 70, 199, '2024-10-18 02:50:56', '2024-12-16 07:53:42'),
		(250, 'b50dff9b-2a8c-4dd6-97b9-ec27173a4ef8', '2024', NULL, 91, '2024-11-22', 425, 428, 431, '2024-11-22 03:25:51', '2024-11-22 03:25:51'),
		(253, '8a12ad25-ed2d-47b3-87f4-b491804bc157', '2024', NULL, 12, '2024-12-14', 286, 70, 187, '2024-12-14 06:59:15', '2024-12-14 06:59:31'),
		(256, '8d974e90-7792-4710-82ae-30bc181a0d29', '2024', NULL, 4, '2024-12-14', 244, 70, 415, '2024-12-14 09:29:29', '2024-12-14 09:29:29'),
		(259, '3ef55003-dec0-434b-9a6a-5539fc2a0888', '2024', NULL, 1, '2024-12-16', 235, 70, 415, '2024-12-16 07:53:30', '2024-12-16 07:53:30'),
		(262, '06879764-a841-4561-9efc-497ff53273e6', '2024', NULL, 37, '2024-12-16', 373, 106, 199, '2024-12-16 08:26:31', '2024-12-16 08:26:31'),
		(265, '7a2c9e3f-93e4-4ff5-bbc3-d07b37a6dafb', '2024', NULL, 15, '2024-12-17', 280, 52, 217, '2024-12-17 03:52:14', '2024-12-17 03:52:14'),
		(268, '238ad9d5-00f0-4d1f-ac9c-b429915f58b0', '2024', NULL, 36, '2024-12-13', 370, 115, 415, '2024-12-17 05:13:44', '2024-12-17 05:13:44'),
		(271, '43dba6bc-a87a-4ee9-b4dd-7b43d5c47289', '2024', NULL, 21, '2024-12-17', 316, 67, 178, '2024-12-17 06:53:35', '2024-12-17 06:53:35'),
		(274, '63a781bc-05af-4782-ae4b-8c5c236d98ee', '2024', NULL, 23, '2024-12-17', 313, 76, 160, '2024-12-17 06:59:51', '2024-12-18 09:44:27'),
		(277, '68038646-35e5-44fe-8fae-91c6ca5c303e', '2024', NULL, 13, '2024-12-18', 283, 43, 421, '2024-12-18 03:01:33', '2024-12-24 02:07:00'),
		(280, 'b39ec3f1-6538-457c-a26d-44d54fa2b278', '2024', NULL, 11, '2024-12-18', 259, 76, 415, '2024-12-18 05:29:56', '2024-12-18 09:45:12'),
		(283, '324115f3-91c9-4af2-84e3-64e08188dcc5', '2024', NULL, 5, '2024-12-18', 262, 70, 175, '2024-12-18 08:57:36', '2024-12-18 08:59:39'),
		(286, '2dcbf9bc-11d9-454e-9efc-215fd4627b6a', '2024', NULL, 6, '2024-12-18', 268, 70, 151, '2024-12-18 08:58:12', '2024-12-18 08:59:48'),
		(292, 'ebc41dfd-88ee-4945-9c17-eb1abfafefd8', '2024', NULL, 9, '2024-12-18', 271, 91, 421, '2024-12-18 22:03:30', '2024-12-23 08:27:53'),
		(295, '8f63e794-bfe3-4d87-8bda-b83f6385bbd2', '2024', NULL, 109, '2024-12-19', 325, 61, 151, '2024-12-19 02:33:20', '2024-12-19 02:33:20'),
		(298, '0e61044a-d015-4ab8-b63c-b891ef2bf7b8', '2024', NULL, 27, '2024-12-19', 343, 70, 421, '2024-12-19 02:50:34', '2024-12-19 02:50:34'),
		(301, '579f4473-5f96-44a8-991c-081c85cc5fc3', '2024', NULL, 28, '2024-12-19', 337, 43, 217, '2024-12-19 04:18:29', '2024-12-19 04:18:29'),
		(304, '4e81462f-b258-4aa5-8399-2dcfe0df6751', '2024', NULL, 29, '2024-12-19', 340, 70, 223, '2024-12-19 05:30:19', '2024-12-19 05:30:19'),
		(307, '85ec16bf-ead7-42f2-a401-12efa407f55f', '2024', NULL, 31, '2024-12-19', 328, 91, 178, '2024-12-19 07:03:11', '2024-12-23 08:14:29'),
		(310, '01d1c545-4466-4c74-86d2-b3b5936ac5e2', '2024', NULL, 26, '2024-12-19', 331, 43, 226, '2024-12-19 07:56:10', '2024-12-19 08:14:33'),
		(313, '20d82302-6578-448b-bd8a-0ff27f02151f', '0000', NULL, 30, '2024-12-19', 346, 88, 169, '2024-12-19 07:58:07', '2024-12-19 07:58:07'),
		(316, 'd6e3ffce-291f-4721-9ad8-d6a01518e8af', '2024', NULL, 33, '2024-12-19', 352, 70, 415, '2024-12-19 09:16:48', '2024-12-19 09:16:48'),
		(319, 'a3720210-863c-4445-8e7f-bfff97e658e7', '2024', NULL, 24, '2024-12-17', 322, 88, 226, '2024-12-19 17:25:27', '2024-12-19 17:25:27'),
		(325, 'd1ec541c-6f53-4512-b6e8-953308c09195', '2024', NULL, 30, '2024-12-19', 346, 88, 169, '2024-12-19 17:29:05', '2024-12-19 17:29:05'),
		(328, 'a1a6604e-a118-46c7-a4cc-8382715f4e32', '2024', NULL, 18, '2024-12-20', 304, 43, 229, '2024-12-20 01:49:09', '2024-12-20 01:49:09'),
		(331, '1c7129da-9477-44a0-9c54-6d4439838e73', '2024', NULL, 103, '2024-12-20', 289, 85, 178, '2024-12-20 03:01:51', '2024-12-20 03:01:51'),
		(334, '5dde3262-c637-4bf8-b71b-c8808178138c', '2024', NULL, 94, '2024-12-20', 241, 43, 166, '2024-12-20 03:14:15', '2024-12-20 03:14:15'),
		(337, 'cd3b967e-b470-4602-ad0d-d7fa86fc81fe', '2024', NULL, 10, '2024-12-20', 256, 79, 217, '2024-12-20 04:12:32', '2024-12-23 08:35:49'),
		(340, 'c91cd4fb-ef3b-43b5-ab45-54353e32bab9', '2024', NULL, 20, '2024-12-20', 295, 70, 223, '2024-12-20 04:54:22', '2024-12-20 04:54:22'),
		(343, '89d26a1f-033d-414a-a960-6e59fd66d401', '2024', NULL, 19, '2024-12-20', 292, 85, 196, '2024-12-20 05:13:32', '2024-12-20 05:13:32'),
		(346, '0e78f5f8-96ec-4bc8-91bc-220c134d4934', '2024', NULL, 22, '2024-12-20', 310, 82, 151, '2024-12-20 07:37:05', '2024-12-20 07:37:05'),
		(349, 'b5c28bd8-7017-4835-aa9c-2cc1b87318af', '2024', NULL, 39, '2024-12-20', 367, 70, 223, '2024-12-20 07:58:28', '2024-12-20 07:58:28'),
		(352, 'bddcfb81-af99-404c-897d-d8a73370b087', '2024', NULL, 16, '2024-12-20', 301, 85, 181, '2024-12-20 22:21:31', '2024-12-20 22:21:31'),
		(355, 'ee698fee-94b6-4b3b-b5eb-a013b67ff8c9', '2024', NULL, 91, '2024-12-23', 232, 70, 415, '2024-12-23 01:38:01', '2024-12-23 01:38:01'),
		(358, '976110b1-33ee-4507-92f9-7934b8bb5029', '2024', NULL, 32, '2024-12-23', 334, 58, 421, '2024-12-23 08:52:39', '2024-12-23 08:52:39'),
		(361, '7887fc3a-fd50-4d6e-9baf-7311d56696af', '2024', NULL, 7, '2024-12-20', 265, 82, 415, '2024-12-23 13:31:05', '2025-01-06 02:48:32'),
		(364, 'bc9dc775-9dfe-43b9-baa2-baed69c41545', '2024', NULL, 106, '2024-12-17', 307, 43, 169, '2024-12-24 02:05:54', '2024-12-24 02:05:54'),
		(367, 'd8ca61e6-e894-40f7-b09c-4fb38a9eb522', '2024', NULL, 40, '2024-12-21', 358, 43, 178, '2024-12-24 02:08:42', '2024-12-24 02:08:42'),
		(370, '971eda05-b10c-4893-b101-f2a6e5b792d6', '2024', NULL, 2, '2024-12-14', 247, 64, 151, '2024-12-24 07:50:59', '2024-12-24 07:50:59'),
		(373, 'a6fb3381-3ab8-434f-9f25-0e5459edcb5f', '2024', NULL, 17, '2024-12-20', 298, 64, 229, '2024-12-24 07:52:07', '2024-12-24 07:52:07'),
		(376, 'bedd2009-9db2-4353-83c3-47db72b45d3a', '2024', NULL, 35, '2024-12-19', 349, 64, 175, '2024-12-24 07:53:22', '2024-12-24 07:53:22'),
		(379, '67677b6d-b69b-4672-a52c-20f1d74f38df', '2024', NULL, 97, '2024-12-18', 253, 64, 166, '2024-12-24 07:54:49', '2024-12-24 07:54:49'),
		(382, 'dc8ad910-e53e-48ee-82c3-4b83a59700af', '2024', NULL, 38, '2024-12-19', 364, 73, 421, '2024-12-24 09:58:55', '2024-12-24 09:58:55'),
		(385, 'ffee7f6e-7e85-4b40-bcb4-b57d5cf58f49', '2024', NULL, 100, '2024-12-21', 274, 49, 223, '2025-01-07 15:57:53', '2025-01-07 15:57:53'),
		(388, 'c40f505e-1917-47f5-bfd7-24d0d2c0113f', '2024', NULL, 112, '2024-12-16', 355, 49, 421, '2025-01-08 01:11:32', '2025-01-20 04:20:32'),
		(389, '61bc77bc-0a5c-4ea0-9320-b7a2b250fb12', '2024', NULL, 41, '2025-02-05', 406, 43, 178, '2025-02-05 01:53:28', '2025-02-05 01:53:28'),
		(392, '3dc63fe3-7f5c-43f7-8e24-c375046f69fa', '2024', NULL, 125, '2025-02-27', 400, 452, 415, '2025-02-27 02:37:52', '2025-02-27 02:37:52'),
		(394, '49291b6c-b074-48e8-a1ae-e7bbc4481553', '2025', NULL, 72, '2025-03-04', 388, 70, NULL, '2025-03-04 06:11:13', '2025-03-04 06:11:13'),
		(397, 'c9f4cdf6-b68b-4175-ad42-02c05e53ee31', '2025', NULL, 68, '2025-03-04', 403, 70, NULL, '2025-03-04 06:11:39', '2025-03-04 06:11:39'),
		(400, '274a0047-e9fd-4621-9995-3397030328c3', '2024', NULL, 71, '2025-03-04', 391, 452, 415, '2025-03-04 08:08:51', '2025-03-04 08:08:51'),
		(403, '5a8c472f-7070-4ecf-9194-0493be4d22ca', '2025', NULL, 41, '2025-03-06', 406, 70, NULL, '2025-03-06 07:05:50', '2025-03-06 07:05:50'),
		(406, '4df8c0bd-d12a-4936-86f3-f7e1ecc5c4ec', '2024', NULL, 69, '2025-02-24', 413, 55, 163, '2025-03-20 04:37:07', '2025-03-20 04:37:07'),
		(409, 'f4d81e72-d021-4cba-939b-d8d22ff8a47f', '2024', NULL, 70, '2025-03-04', 382, 43, NULL, '2025-03-20 06:46:01', '2025-03-20 06:46:01'),
		(412, '3b455867-8373-4e4a-8ffd-dbd4b4555b8f', '2024', 89, NULL, '2025-03-04', 394, 43, NULL, '2025-03-20 06:46:25', '2025-03-20 06:46:25'),
		(415, '76572ff5-662f-4205-b3d1-40cc79ce2d7e', '2024', NULL, 75, '2025-03-04', 385, 455, 421, '2025-03-21 06:34:36', '2025-03-21 06:34:36'),
		(418, 'c79249d7-e25f-4d33-a981-0cc7edd69bc9', '2025', 88, 88, '2025-02-24', 394, 70, NULL, '2025-05-14 01:42:25', '2025-05-14 01:42:25'),
		(419, '1625be7d-286f-483c-a0b6-92c4c29a6e1b', '2025', NULL, 91, '2025-11-29', 232, 428, 431, '2025-11-21 02:25:53', '2025-11-21 02:25:53');
    `).Error

	if err != nil {
		t.Fatalf("migration failed: %v", err)
	}

	cleanup := func() {
		sqlDB, _ := gdb.DB()
		sqlDB.Close()
		mysqlC.Terminate(ctx)
	}

	return gdb, cleanup
}
